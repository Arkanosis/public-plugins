<html>
<head>
<meta name="author" content="helpdesk" />
<meta name="navigation" content="Software" />
<title>Replacing Template Elements</title>
</head>

<body>

<h2 class="breadcrumbs">Replacing Template Elements</h2>

<p>The basic page modules described in the introduction are not 
themselves overridden in plugins, as there is a group of ancillary 
modules designed for this task:</p>

<dl>
<dt>Document::Configure</dt>
<dd>This module can be used to add or remove standard template elements, 
or replace them with customized elements from your plugin</dd>
<dt>Document::HTML::&lt;module name&gt;</dt>
<dd>These modules output the chunks of HTML that make up the template. By creating
your own alternatives to these modules and then specifying their use in
Document::Configure, you can alter many aspects of the template</dd>
</dl>
 
<h3 class="boxed">Replacing a global element</h3>

<p>Let's say that you want a different set of links in the blue bar
that sits under the search box. First you need to create a copy of the appropriate
file (EnsEMBL::Web::Document::HTML::HelpLink.pm) in the appropriate plugin 
namespace, and edit it to output the HTML you want:</p>

<div class="formpanel">
<pre>
package EnsEMBL::MyNamespace::Document::HTML::HelpLink;
use strict;
use CGI qw(escapeHTML escape);
use EnsEMBL::Web::Document::HTML;

use constant HELPVIEW_WIN_ATTRIBS =&gt; "width=700,height=550,resizable,scrollbars";

our @ISA = qw(EnsEMBL::Web::Document::HTML);

sub new           { return shift-&gt;SUPER::new(); }

sub render {
  my $self = shift;
    
  my $home = $ENV{'SITE_LOGO_HREF'}; ## Assuming your logo links back to your mirror's home page
  my $html = qq( &lt;a href="$home"&gt;HOME&lt;/a&gt;  &amp;middot; &lt;a href="/info/contact.html"&gt;CONTACT US&lt;/a&gt; );

  $self-&gt;print( qq(
&lt;div id="help"&gt;&lt;strong&gt;$html&lt;/strong&gt;&lt;/div&gt;
));
}

1;

</pre>
</div>

<p>Next, you need to create a <kbd>Document::Configure</kbd> module
in your plugin that replaces the original module with yours:</p>

<div class="formpanel">
<pre>
package EnsEMBL::MyNamespace::Document::Configure;

use EnsEMBL::Web::Root;
our @ISA  = qw(EnsEMBL::Web::Root);

sub common_page_elements {
  my( $self, $doc ) = @_;
  $doc-&gt;replace_body_element qw(helplink EnsEMBL::MyNamespace::Document::HTML::HelpLink);
}

1;
</pre>
</div>

<p>In the call to <kbd>replace_body_element</kbd>, the first parameter is the key
that identifies the template element in the base webcode, and the second parameter
is the name of your replacement element.</p>

<h3 class="boxed">Adding a section to the static content menu</h3>

<p>Let's say you would like all static pages to have an extra section of links to
useful pages. Because the left-hand menus are handled dynamically, no 
<kbd>Document::HTML::ExtraLinks</kbd> module is needed. Instead
we configure the list directly in <kbd>Document::Configure</kbd>:</p>

<div class="formpanel">
<pre>
package EnsEMBL::MyNamespace::Document::Configure;

use EnsEMBL::Web::Root;
our @ISA  = qw(EnsEMBL::Web::Root);

sub static_menu_items {
  my( $self, $doc ) = @_;
  $doc-&gt;menu-&gt;add_block( 'extra_links', 'bulleted', 'Useful Links', 'priority' =&gt; 100 );

  $doc-&gt;menu-&gt;add_entry( 'extra_links',
    'href'  =&gt; 'http://www.biocorp.com/',
    'text'  =&gt; 'BioCorp Intranet',
  );

  $doc-&gt;menu-&gt;add_entry( 'extra_links',
    'href'  =&gt; 'http://www.genome-institute.edu/projects/acme',
    'text'  =&gt; 'ACME Genomics Lab',
  );

}

1;
</pre>
</div>

<p>The priority parameter controls the order of blocks in the menu bar - by tweaking this value
you should be able to get your block to appear anywhere in the left-hand column.</p>

</body>
</html>
